
http协议用于客户端和服务端之间的通信。是一种不保存状态，即无状态协议。自身不对请求和响应之间的通信状态进行保存。能够明确区分哪端是客户端，哪端是服务端。

http方法：

* get：获取资源
* post：传输实体主体
* put：传输文件（不带验证机制）
* head：获取报文首部（用于确认URI的有效性及资源更新的日期时间等）
* delete：删除文件（不带验证机制）
* options：询问支持的方法
* trace：追踪路径（用来确认连接过程中的操作，容易引发xst攻击）
* connect：要求用隧道协议连接代理（使用ssl+tls把通信内容加密后经网络隧道传输）

get 和 post 的区别：

* post 请求中有 body，get 请求没有
* post 是把参数放在请求报文的请求正文里，无法直接看到。get 是直接把参数放在 url 里，可以直接看到内容
* post 没有长度限制，get 因为参数要写在 url 里，所以有长度限制
* post 主要用于提交，get 主要用于查询

http 常用状态码

* 1xx：请求正在处理
* 2xx：请求成功，正常处理完毕
  * 200：正常处理了
  * 204：请求成功，但服务端不返回任何实体
  * 206：请求成功，但客户端是范围请求，断点续传
    * 该请求必须包含 Range 头信息来指示客户端希望得到的内容范围，并且可能包含 If-Range 来作为请求条件。
* 3xx：重定向
  * 301：永久重定向
  * 302：临时重定向，将来可能还会变
  * 303：资源 url 已更新，且应使用 get 获取资源
  * 304：资源已找到，但未满足条件。（和重定向无关）
  * 307：临时重定向，不会从 post 变成 get
* 4xx：客户端发生错误，服务器无法处理
  * 400：请求存在语法错误
  * 401：请求需要认证，初次会弹出认证对话框，非初次则表示认证失败
  * 403：无权访问，被服务器拒绝
  * 404：找不到资源
* 5xx：服务器处理请求出错
  * 500：服务器执行请求时发生了错误
  * 503：服务器故障无法处理请求

持久连接：

* HTTP Persistent Connections，也称为HTTP keep-alive 或HTTP connection reuse
* 特点：只要任意一端没有明确提出断开连接，则保持TCP连接状态
* 好处：
  * 减少了TCP连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载
  * 使HTTP请求和响应能够更早地结束，页面的显示速度也就相应提高了
* 持久连接使得多数请求以管线化（pipelining）方式发送成为可能，不用等待响应亦可以直接发送下一个请求

https：

* https=http+加密+认证+完整性保护
* url 中的协议不再使用http://，而是使用https://
* https 是身披 ssl 外壳的 http 协议（并非是应用层的一种新协议，只是 http 通信接口部分用 ssl 和 tsl 代替而已）
* 所有信息加密传播，具有校验机制防止篡改，配备身份证书防止冒充
* 握手之后的对话使用“对话秘钥”对称加密
* 服务器的公钥和私钥只用到一次，用于加密和解密“对话秘钥（非对称加密）”

https 数据传输流程：
![http1](/images/http3.jpg)

为什么要三个随机数：

* 由于SSL证书是静态的，所以需要随机数保证每次生成的秘钥不一样
* 三个随机数通过一个密钥导出器最终导出一个对称密钥。

https 安全性：

* 握手阶段不加密，都是明文，前两个随机数都是可见的
* 整个通信的安全取决于第三个随机数能否被破解
* 理论上只要公钥足够长，就不会被破解

https 缺点：

* 多次握手可能导致页面加载时间延长
* 数据的开销和功耗比 https 更大
* 需要申请 ssl 证书
* 涉及到的安全算法会消耗 CPU 资源，对服务器消耗大

和 http 的区别：

* http 是明文传输，https 是加密传输，更安全
* 连接方式不同，默认端口不同，http 是 80，https 是 443

http2.0的改进：

* 支持服务端推送：
  * 能够在客户端发送第一个请求到服务端时，提前把一部分内容推送给客户端，放入缓存当中，这可以避免客户端请求顺序带来的并行度不高，从而导致的性能问题。
* 支持TCP连接复用
  * 使用同一个 TCP 连接来传输多个 HTTP 请求，避免了 TCP 连接建立时的三次握手开销，和初建 TCP 连接时传输窗口小的问题。
* HTTP2支持二进制传送（实现方便且健壮），HTTP1.x是字符串传送
